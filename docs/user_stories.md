# 📋 User Stories – Water Log 서비스

> **목적**: 물 섭취 기록을 통한 생활 변화와 컨디션 이해를 돕는 습관 형성 앱의 사용자 스토리 기반 요구사항 명세서

---

## 1. 물 섭취 기록 기능 (Water Intake Logging)

### US-001: 간편한 물 섭취 기록
**As a** 바쁜 직장인  
**I want to** ml 단위 없이 간단한 버튼 선택으로 물 섭취를 기록하고 싶다  
**So that** 복잡한 입력 과정 없이 빠르게 기록할 수 있다

**인수 조건 (Acceptance Criteria)**
- [ ] 사용자는 "마셨음", "조금 마셨음", "거의 안 마셨음" 중 하나를 선택할 수 있다
- [ ] ml 숫자 입력 없이 버튼만으로 기록이 완료된다
- [ ] 기록은 즉시 저장되며 별도의 확인 절차가 없다
- [ ] 하루에 여러 번 기록할 수 있다

**우선순위**: P0 (필수)

---

### US-002: 기록 누락에 대한 부담 제거
**As a** 수분 섭취에 관심 있는 사용자  
**I want to** 하루 기록을 하지 않아도 실패로 처리되지 않기를 원한다  
**So that** 기록 누락으로 인한 죄책감 없이 지속적으로 앱을 사용할 수 있다

**인수 조건 (Acceptance Criteria)**
- [ ] 하루 0회 기록도 허용된다
- [ ] 연속 기록(streak) 기능이 없다
- [ ] 누락일은 "데이터 없음"으로 표시되며 경고 메시지가 없다
- [ ] 기록하지 않은 날에 대한 알림이나 푸시가 발생하지 않는다

**우선순위**: P0 (필수)

---

### US-003: 기록 시간 자동 저장
**As a** 앱 사용자  
**I want to** 물을 마신 시간이 자동으로 기록되기를 원한다  
**So that** 나중에 시간대별 패턴을 분석할 수 있다

**인수 조건 (Acceptance Criteria)**
- [ ] 기록 버튼 클릭 시 현재 시간이 자동으로 저장된다
- [ ] 저장된 시간은 사용자가 직접 확인할 수 있다
- [ ] 시간 정보는 AI 리포트 생성 시 활용된다

**우선순위**: P0 (필수)

---

## 2. 기록 조회 기능 (View History)

### US-004: 일별 물 섭취 기록 조회
**As a** 앱 사용자  
**I want to** 특정 날짜의 물 섭취 기록을 확인하고 싶다  
**So that** 내가 언제 얼마나 마셨는지 파악할 수 있다

**인수 조건 (Acceptance Criteria)**
- [ ] 날짜별로 기록된 물 섭취 내역을 목록으로 볼 수 있다
- [ ] 각 기록마다 시간과 섭취량 레벨(마셨음/조금/거의 안 마셨음)이 표시된다
- [ ] 기록이 없는 날은 "기록 없음" 또는 빈 상태로 표시된다

**우선순위**: P0 (필수)

---

### US-005: 주간/월간 패턴 조회
**As a** 컨디션 개선에 관심 있는 사용자  
**I want to** 주간 또는 월간 물 섭취 패턴을 한눈에 보고 싶다  
**So that** 내 습관의 변화를 시각적으로 이해할 수 있다

**인수 조건 (Acceptance Criteria)**
- [ ] 주간 또는 월간 단위로 기록을 조회할 수 있다
- [ ] 캘린더 또는 타임라인 형태로 데이터가 시각화된다
- [ ] 패턴을 쉽게 파악할 수 있는 UI를 제공한다

**우선순위**: P1 (경험 강화)

---

### US-006: 기록 수정 및 삭제
**As a** 앱 사용자  
**I want to** 잘못 입력한 기록을 수정하거나 삭제하고 싶다  
**So that** 정확한 데이터를 유지할 수 있다

**인수 조건 (Acceptance Criteria)**
- [ ] 기록한 항목을 클릭하여 수정할 수 있다
- [ ] 기록을 삭제할 수 있다
- [ ] 수정/삭제 시 확인 절차가 있다

**우선순위**: P1 (경험 강화)

---

## 3. AI 기반 리포트 기능 (AI-Powered Insights)

### US-007: AI 해석 리포트 생성
**As a** 물 섭취를 관리하고 싶은 사용자  
**I want to** 내 물 섭취 패턴을 AI가 분석하여 의미 있는 해석을 제공받고 싶다  
**So that** 단순한 숫자가 아닌 생활 변화로서 이해할 수 있다

**인수 조건 (Acceptance Criteria)**
- [ ] 최소 3일 이상의 데이터가 있을 때 리포트 생성이 가능하다
- [ ] Gemini API를 통해 물 섭취 패턴을 분석한다
- [ ] 리포트는 평가나 훈계 없이 관찰과 해석 중심으로 작성된다
- [ ] 리포트에는 요일/시간대별 패턴이 포함된다
- [ ] 부정적인 표현(목표 미달, 실패 등)을 사용하지 않는다

**우선순위**: P0 (필수)

---

### US-008: 리포트 자동 생성 주기
**As a** 앱 사용자  
**I want to** 주 1회 자동으로 AI 리포트가 생성되기를 원한다  
**So that** 일일이 요청하지 않아도 정기적으로 인사이트를 받을 수 있다

**인수 조건 (Acceptance Criteria)**
- [ ] 매주 특정 요일에 자동으로 리포트가 생성된다
- [ ] 리포트 생성 완료 시 앱 내 알림이 표시된다
- [ ] 자동 생성된 리포트를 리포트 목록에서 확인할 수 있다

**우선순위**: P1 (경험 강화)

---

### US-009: 수동 리포트 생성 요청
**As a** 앱 사용자  
**I want to** 원할 때마다 즉시 AI 리포트를 요청하고 싶다  
**So that** 궁금할 때 바로 내 패턴을 확인할 수 있다

**인수 조건 (Acceptance Criteria)**
- [ ] "리포트 생성" 버튼을 통해 언제든지 리포트를 요청할 수 있다
- [ ] 최소 데이터 조건(3일) 미만일 경우 안내 메시지가 표시된다
- [ ] 리포트 생성 중 로딩 상태가 표시된다
- [ ] 생성된 리포트는 즉시 화면에 표시된다

**우선순위**: P0 (필수)

---

### US-010: 생성된 리포트 조회
**As a** 앱 사용자  
**I want to** 과거에 생성된 AI 리포트를 다시 확인하고 싶다  
**So that** 시간에 따른 변화를 비교할 수 있다

**인수 조건 (Acceptance Criteria)**
- [ ] 리포트 목록 페이지에서 과거 리포트를 확인할 수 있다
- [ ] 각 리포트는 생성 날짜와 함께 표시된다
- [ ] 리포트를 클릭하면 전체 내용을 볼 수 있다
- [ ] 리포트는 최신순으로 정렬된다

**우선순위**: P0 (필수)

---

### US-011: 컨디션 메모와 연계된 리포트
**As a** 컨디션 변화를 추적하고 싶은 사용자  
**I want to** 피로도, 붓기 등 컨디션 메모를 남기고 이를 AI 리포트에 반영하고 싶다  
**So that** 물 섭취와 컨디션의 상관관계를 이해할 수 있다

**인수 조건 (Acceptance Criteria)**
- [ ] 선택적으로 컨디션 메모(피로, 붓기 등)를 입력할 수 있다
- [ ] 컨디션 메모는 하루 최대 1회 입력 가능하다
- [ ] AI 리포트 생성 시 컨디션 메모 데이터가 함께 분석된다
- [ ] 리포트에서 물 섭취와 컨디션의 패턴이 설명된다

**우선순위**: P1 (경험 강화)

---

### US-012: 리포트 톤과 메시지 품질
**As a** 앱 사용자  
**I want to** AI 리포트가 공감적이고 긍정적인 톤으로 작성되기를 원한다  
**So that** 기분 좋게 내 데이터를 이해하고 동기부여를 받을 수 있다

**인수 조건 (Acceptance Criteria)**
- [ ] 리포트는 공감적이고 설명 중심의 톤을 유지한다
- [ ] "실패", "부족", "못했다" 등의 부정적 표현을 사용하지 않는다
- [ ] 관찰 → 해석 → 가벼운 제안 순서로 구성된다
- [ ] 예시: "완벽하진 않았지만, 지난주보다 오후 물 섭취 빈도가 늘었어요."

**우선순위**: P0 (필수)

---

## 4. 선택적 기능 (Optional Features)

### US-013: 맥락 기반 알림 설정
**As a** 알림을 통해 도움받고 싶은 사용자  
**I want to** 원하는 시간대에만 부드러운 톤의 알림을 받고 싶다  
**So that** 방해받지 않으면서도 적절한 타이밍에 물을 마실 수 있다

**인수 조건 (Acceptance Criteria)**
- [ ] 알림 기본값은 OFF이다
- [ ] 사용자가 원하는 시간대(예: 오후 3-5시)를 설정할 수 있다
- [ ] 알림 톤은 권유형/허용형이다 (예: "지금 한 모금 정도면 충분해요")
- [ ] 알림 설정을 언제든지 끄고 켤 수 있다

**우선순위**: P1 (경험 강화)

---

### US-014: 해석 보조 질문
**As a** 더 나은 인사이트를 받고 싶은 사용자  
**I want to** 간단한 질문(컨디션 체크)에 답변하여 AI 해석의 정확도를 높이고 싶다  
**So that** 더 개인화된 리포트를 받을 수 있다

**인수 조건 (Acceptance Criteria)**
- [ ] 하루 최대 1회 선택형 질문이 표시된다
- [ ] 질문 예: "오늘 컨디션은 어땠어?", "붓기나 피로를 느꼈어?"
- [ ] 답변은 선택 사항이며 강제되지 않는다
- [ ] 답변 데이터는 AI 리포트 생성에 활용된다

**우선순위**: P1 (경험 강화)

---

## 5. 사용자 경험 원칙

### UX-001: 실패하지 않는 경험
- 기록 누락, 연속 기록 실패 등의 개념을 제거
- 모든 데이터는 "있음" 또는 "없음"으로만 처리
- 부정적 메시지나 경고 없음

### UX-002: 최소한의 인지적 부담
- ml 입력 없이 버튼 선택만으로 기록
- 하루 최대 1회 간단한 질문
- 앱을 자주 열지 않아도 가치 제공

### UX-003: 의미 있는 해석 제공
- 숫자가 아닌 언어로 된 해석
- 생활 변화와 컨디션의 연결
- 공감적이고 긍정적인 톤

---

## 6. 기술 요구사항

### TECH-001: Next.js 기반 구현
- Next.js App Router 사용
- 서버/클라이언트 컴포넌트 적절히 활용
- TypeScript로 타입 안정성 확보

### TECH-002: Supabase 데이터 관리
- 물 섭취 기록(`intake_logs`) 테이블
- 컨디션 메모(`condition_logs`) 테이블
- AI 리포트(`ai_reports`) 테이블
- 실시간 데이터 동기화

### TECH-003: Gemini API 통합
- Google Gemini API를 통한 자연어 리포트 생성
- 물 섭취 패턴 + 컨디션 데이터 입력
- 공감적 톤의 텍스트 출력
- API 키 환경 변수 관리

---

## 7. 성공 지표

| 지표 | 정의 | 목표 |
|-----|------|-----|
| 기록 완료율 | 앱 실행 시 기록 완료 비율 | 70% 이상 |
| AI 리포트 조회율 | 생성된 리포트 열람 비율 | 80% 이상 |
| 7일 유지율 | 설치 후 7일 내 재방문 | 60% 이상 |
| 무기록 후 재방문율 | 기록 누락 후 재방문 비율 | 50% 이상 |

---

## 8. 우선순위 요약 

### P0 (MVP 필수 기능) ✅
- US-001: 간편한 물 섭취 기록
- US-002: 기록 누락에 대한 부담 제거
- US-003: 기록 시간 자동 저장
- US-004: 일별 물 섭취 기록 조회
- US-007: AI 해석 리포트 생성
- US-009: 수동 리포트 생성 요청
- US-010: 생성된 리포트 조회
- US-012: 리포트 톤과 메시지 품질

### P1 (경험 강화 기능) 🔄
- US-005: 주간/월간 패턴 조회
- US-006: 기록 수정 및 삭제
- US-008: 리포트 자동 생성 주기
- US-011: 컨디션 메모와 연계된 리포트
- US-013: 맥락 기반 알림 설정
- US-014: 해석 보조 질문

---

## 9. 제외 사항 (Out of Scope)

> [!IMPORTANT]
> **로그인/인증 기능은 MVP 범위에서 제외됩니다.**
> - 이메일/소셜 로그인 불포함
> - 회원가입 프로세스 불포함
> - 사용자 프로필 관리 불포함
> - 로컬 데이터로 동작하거나, 추후 인증 추가 전까지는 단일 사용자로 가정

---

**문서 버전**: 1.0  
**최종 수정일**: 2025-12-19  
**작성 기준**: PRD.md v1.0
